21:33 < kyb3R> siis ne objektit listataan kenen ne on
21:33 < ion> Millä lailla käyttäjästä riippuva?
21:34 < ion> Sisään kirjautuneen käyttäjän laitteet listataan siis?
21:34 < kyb3R> sen joka on logannut sisään juuro
21:34 < kyb3R> juuro = juuri
21:35 < ion> Jees, sitten vain Device.each pois ja current_user.devices.each 
             tilalle. current_user taas on helper, joka määritellään 
             autentikoinnin toteuttamisen yhteydessä ApplicationHelperissä. 
             Tai siis se mun RPX-plugin tulee tekemään niin. :-)
21:35 < kyb3R> :)
21:35 < ion> Alkuvaiheessa voi tehdä jotain tyyliin
21:36 < ion> app/helpers/application_helper.rb
21:36 < ion> module ApplicationHelper
21:36 < ion>   def current_user
21:36 < ion>     User.first
21:36 < ion>   end
21:36 < ion> end
21:36 < ion> Tuo palauttaa noin aina tietokannan ekan käyttäjätunnuksen.
21:37 < ion> helperit ovat siis metodeja, jotka ovat sekä ohjaimien että 
             näkymien käytettävissä. Se stylesheet_link_tag esim. on Railsin 
             mukana tuleva helper.
21:38 < kyb3R> okei
21:39 < kyb3R> eipä ole vielä tuota user tehty, mutta... :)
21:36 < ion> end
21:36 < ion> Tuo palauttaa noin aina tietokannan ekan käyttäjätunnuksen.
21:37 < ion> helperit ovat siis metodeja, jotka ovat sekä ohjaimien että 
             näkymien käytettävissä. Se stylesheet_link_tag esim. on Railsin 
             mukana tuleva helper.
21:38 < kyb3R> okei
21:39 < kyb3R> eipä ole vielä tuota user tehty, mutta... :)
21:39 < ion> Sitä odotellessa voi pistää sinne layoutiin vaikka Device.each.
21:39 < kyb3R> jo
21:40 < kyb3R> kunhan sen nyt saa jotenkin iteroimaan erikseen julkiset ja 
               yksityise devicet 
21:40 < kyb3R> se menee jollain param jutuilla
21:40 < kyb3R> pitää perehtyä
21:40 < ion> app/model/device.rb
21:41 < ion> scope :private, where(:display => 'private')
21:41 < ion> scope :public, where(:display => 'public')
21:41 < ion> Device.public.each do |dev| ... end
21:41 < kyb3R> jeps
21:41 < ion> user.devices.public.each do ...


18.4.2010

13:11 -!- AtomicTr1op [sariolaa@tutor.cc.tut.fi] has joined #5w
13:11 -!- AtomicTr1op [sariolaa@tutor.cc.tut.fi] has quit [Client Quit]
13:21 -!- AtomicTr1op [sariolaa@tutor.cc.tut.fi] has joined #5w
13:21 -!- AtomicTr1op [sariolaa@tutor.cc.tut.fi] has quit [Client Quit]
16:00 < ion> kyb3r: En ole käyttänyt, mutta joo, lokalisointiin se on oikea 
             tapa.
16:46 < kyb3R> railsin kohdalla on väittelyä jonkun pluginin ja 
               sisäänrakennetun JSON kirjaston välillä. Plugin väitetään 
               olevan huomattavasti nopeampi...varmaan parempi pysyä ihan 
               sisäänrakennetun käytössä
16:47 < kyb3R> gem install json vai gem install json_pure
16:48 < kyb3R> vai olikohan se jo asennettu...
17:19 < ion> Tuollaisia kannattaa miettiä vasta sitten, kun on *oikeasti* 
             performanssiongelma. :-)
17:20 < ion> Ja joo, jos #to_json toimii, kaikki tarvittava on jo asennettu.
17:21 < kyb3R> :)
17:21 < kyb3R> totta
17:21 < ion> Ja jos on performanssiongelma, voi olla kätevämpi käyttää Railsin 
             tarjoamia menetelmiä cachetukseen ja tehdä JSON-konversion vain 
             kerran aina datan muuttuessa kuin vaihtaa JSON-kirjastoa ja yhä 
             tehdä JSON-muunnoksen aina.
17:23 < ion> Tuolla on hyvää settiä cachetuksesta yms. 
             http://railslab.newrelic.com/scaling-rails
17:23 < kyb3R> no joo. Tuossa karttamokkulassa osa datasta tullee muuttumaan 
               ehkä aika tiuhaan. Mutta enpä usko että alussa on 
               performanssiongelmia vaan riittää tuota sarkaa muutenkin
17:25 < kyb3R> ekaks nyt taas kantojen viilausta...
17:25 < kyb3R> kannan
17:25 < ion> Toivotaan, että siinä vaiheessa, kun cachetusjuttuja tarvitaan 
             CATSS:ssä, olen päässyt omissa screencasteissa niin pitkälle, 
             että niissä käydään ne asiat läpi. :-)
17:26 < ion> Rails 3:ssa voi myös tiettyjä requesteja varten tiputtaa 
             frameworkin kokonaisia osia pois käytöstä. Jos on joku yksi 
             request, jota tehdään sata kertaa sekunnissa, sellainenkin 
             saattaa olla harkitsemisen arvoista.
17:28 < kyb3R> nyt pitää tehdä sellanen model generointi missä ei ole view 
               pulikkaa, saas nähdä jaksaako tänään vääntää. No ei meillä ihan 
               sataa kertaa tule pyyntöjä, ehkä vois kuvitella kauas haettuna 
               maksimina jotain 10 kertaa sek. Joka arviona on ihan 
               hattuvakio, eikä mitään oikeaa arvipohjaa, joten pitäneen 
               kertoa rasitus vaikkapa 10:llä :)
17:29 < ion> Cachetusaiheiset railscastit: http://railscasts.com/tags/18
17:29 < kyb3R> okei



Device.create :name => 'Bussi 26', :imei => '1234567890123', :display => 'public'
Device.create :name => 'Bussi 19', :imei => '1234567890124', :display => 'public'
Device.create :name => 'Toiwo', :imei => '1234567890127', :display => 'private'
Device.create :name => 'Katja', :imei => '1234567890128', :display => 'private'
Device.create :name => 'Wille', :imei => '1234567890129', :display => 'private'


